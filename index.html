<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="./style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1> Rock Paper Scissors </h1>
    <div id="rps-buttons">
        <button id="rock"> Rock </button>
        <button id="paper"> Paper </button>
        <button id="scissors"> Scissors </button>
    </div>
    <h3> Results </h3>
    <div class="scoreTab">Player: 0 | Computer: 0</div>
    <button id ="reset"> Reset </button>
    <h3> Score Log </h3>
    <div id="scoreLog"> </div>

    <script>
        console.log("Hello World")

        let humanScore = 0
        let computerScore = 0
        let roundNumber = 0;
        const scoreLog = document.querySelector("#scoreLog")
        const scoreTab = document.querySelector(".scoreTab")
        function playRound(humanChoice, computerChoice){
            roundNumber++;
            if (computerChoice == 'rock'){
                if (humanChoice == 'paper'){
                    return 'win';
                }else if (humanChoice  == 'scissors'){
                    return 'loss';
                }else if (humanChoice == 'rock'){
                    return 'tie';
                }
            } else if (computerChoice == 'paper'){
                if (humanChoice == 'scissors'){
                    return 'win';
                }else if (humanChoice  == 'rock'){
                    return 'loss';
                }
                else if (humanChoice == 'paper'){
                    return 'tie';
                }
            } else if (computerChoice == 'scissors'){
                if (humanChoice == 'rock'){
                    return 'win';
                }else if (humanChoice  == 'paper'){
                    return 'loss';
                }
                else if (humanChoice == 'scissors'){
                    return 'tie';
                }
            }
            console.log("human score: " + humanScore)
            console.log("computer score: " + computerScore)
        }

        function getComputerChoice(){
            let random_value = Math.random()
            if (random_value >= 0 && random_value < 0.33){
                return "rock";
            } else if (random_value >= 0.33 && random_value < 0.66 ){
                return "paper";
            } else if (random_value >= 0.66 && random_value <= 1){
                return "scissors";
            }
        }

        const menu = document.querySelector("#rps-buttons")

        menu.addEventListener('click',(event)=>{
            let button = event.target;
            if (button.id == "rps-buttons") return;
            let computerSelection = getComputerChoice();
            let result = playRound(button.id, computerSelection);
            let scoreDiv = document.createElement("div");
            scoreDiv.classList.add("score-card");
            
            let roundText = document.createElement("p");
            roundText.textContent = "Round #: " + roundNumber;
            roundText.style.fontWeight = 700;

            let choiceText = document.createElement("p");
            choiceText.textContent = "Player chose: " + button.id + " | " + "Computer chose: " + computerSelection;;
            let winText = document.createElement("p");
            let scoreText = document.createElement("p");
            switch (result){
                case 'win': 
                    winText.textContent = "Player wins!"; 
                    humanScore++;
                    break; 
                case 'loss': 
                    winText.textContent = "Computer wins!";
                    computerScore++;
                    break;
                case 'tie': 
                    winText.textContent = "Tie!";
                    break;
            }
            scoreTab.textContent = "Player: " + humanScore + " | Computer: " + computerScore;
            scoreDiv.append(roundText)
            scoreDiv.append(choiceText)
            scoreDiv.append(winText)
            scoreLog.append(scoreDiv)

        });

        const reset = document.querySelector("#reset")

        reset.addEventListener('click',(event)=>{
            Array.from(scoreLog.children).forEach(child => scoreLog.removeChild(child));
            humanScore = 0;
            computerScore = 0;
            scoreTab.textContent = "Player: " + humanScore + " | Computer: " + computerScore;
            roundNumber = 0;
        });
    </script>
</body>
</html>